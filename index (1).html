<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Ankit â¤ï¸ Ruchi</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,600;1,300;1,600&family=Dancing+Script:wght@600;700&family=Montserrat:wght@200;300;400&display=swap" rel="stylesheet">
<style>
/* â”€â”€â”€ RESET & BASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --rose:#e8264a;
  --blush:#ffb3c1;
  --gold:#f0c060;
  --petal:#ff6b8a;
  --dark:#06000e;
  --deep:#120010;
  --cream:#fff5f7;
}
html{scroll-behavior:smooth}
body{
  background:var(--dark);
  font-family:'Montserrat',sans-serif;
  color:var(--cream);
  overflow-x:hidden;
  min-height:100vh;
}

/* â”€â”€â”€ CUSTOM CURSOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body{cursor:none}
#cur{
  position:fixed;width:14px;height:14px;
  background:var(--rose);border-radius:50%;
  pointer-events:none;z-index:9999;
  transform:translate(-50%,-50%);
  transition:width .2s,height .2s,background .2s;
  mix-blend-mode:screen;
  box-shadow:0 0 12px var(--rose);
}
#cur.big{width:40px;height:40px;background:var(--petal)}

/* â”€â”€â”€ PAGE 1: VIDEO HERO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#page1{
  position:relative;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* Canvas "video" */
#videoCanvas{
  width:100%;
  max-height:340px;
  display:block;
  background:linear-gradient(180deg,#1a0025 0%,#06000e 100%);
}

/* Title overlay on canvas */
.canvas-wrap{position:relative;width:100%}
.canvas-overlay{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}
.canvas-date{
  font-family:'Montserrat',sans-serif;
  font-weight:200;
  letter-spacing:8px;
  font-size:11px;
  text-transform:uppercase;
  color:var(--gold);
  opacity:0;
  animation:fadeIn 1.5s 1s forwards;
}
.canvas-heading{
  font-family:'Dancing Script',cursive;
  font-size:clamp(38px,8vw,78px);
  line-height:1;
  background:linear-gradient(135deg,#fff 0%,var(--blush) 45%,var(--gold) 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;
  opacity:0;
  animation:fadeIn 1.5s 1.5s forwards;
  text-shadow:none;
  filter:drop-shadow(0 0 30px rgba(232,38,74,0.6));
}
.canvas-sub{
  font-family:'Cormorant Garamond',serif;
  font-style:italic;
  font-size:clamp(13px,2.5vw,18px);
  color:var(--blush);
  letter-spacing:3px;
  margin-top:6px;
  opacity:0;
  animation:fadeIn 1.5s 2s forwards;
}

/* â”€â”€â”€ TEDDY SECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#teddies{
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:40px 20px 30px;
  gap:6px;
}
.bears-row{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:30px;
  margin:18px 0;
  flex-wrap:wrap;
}
.bear{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
}
.bear-icon{
  font-size:clamp(72px,16vw,110px);
  animation:floatBear 3.5s ease-in-out infinite;
  filter:drop-shadow(0 15px 30px rgba(232,38,74,0.35));
  display:block;
  line-height:1;
}
.bear:nth-child(3) .bear-icon{animation-delay:1.75s}
.bear-name{
  font-family:'Dancing Script',cursive;
  font-size:22px;
  color:var(--gold);
  letter-spacing:1px;
}
.connector{
  font-size:clamp(34px,7vw,54px);
  animation:pulse 1.2s ease-in-out infinite;
  filter:drop-shadow(0 0 18px var(--rose));
  margin:0 10px;
}

/* â”€â”€â”€ CTA BUTTON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cta-btn{
  margin-top:8px;
  padding:16px 44px;
  background:linear-gradient(135deg,var(--rose),#c2185b);
  border:none;
  border-radius:60px;
  color:#fff;
  font-family:'Cormorant Garamond',serif;
  font-size:22px;
  font-style:italic;
  letter-spacing:2px;
  cursor:none;
  box-shadow:0 0 30px rgba(232,38,74,0.5),0 0 60px rgba(232,38,74,0.2);
  transition:transform .3s cubic-bezier(.34,1.56,.64,1),box-shadow .3s;
  position:relative;
  overflow:hidden;
}
.cta-btn::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,0.15),transparent);
  border-radius:inherit;
}
.cta-btn:hover{
  transform:scale(1.08) translateY(-3px);
  box-shadow:0 0 50px rgba(232,38,74,0.8),0 0 100px rgba(232,38,74,0.3);
}

/* â”€â”€â”€ POPUP OVERLAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#popup{
  display:none;
  position:fixed;inset:0;
  background:rgba(6,0,14,0.92);
  backdrop-filter:blur(16px);
  z-index:100;
  align-items:center;
  justify-content:center;
  animation:fadeIn .4s forwards;
}
#popup.show{display:flex}

.popup-box{
  background:linear-gradient(145deg,#12001a,#06000e);
  border:1px solid rgba(232,38,74,0.35);
  border-radius:28px;
  padding:clamp(30px,6vw,52px) clamp(30px,7vw,60px);
  text-align:center;
  box-shadow:0 0 60px rgba(232,38,74,0.2),0 0 120px rgba(232,38,74,0.08);
  position:relative;
  overflow:hidden;
  max-width:430px;
  width:90%;
  animation:popIn .5s cubic-bezier(.34,1.56,.64,1);
}
.popup-box::before{
  content:'';
  position:absolute;
  top:-60px;left:-60px;
  width:200px;height:200px;
  background:radial-gradient(circle,rgba(232,38,74,0.15),transparent);
  border-radius:50%;
}
.popup-rose{
  font-size:46px;
  display:block;
  margin-bottom:10px;
  animation:sway 2s ease-in-out infinite;
}
.popup-title{
  font-family:'Cormorant Garamond',serif;
  font-size:clamp(22px,5vw,32px);
  font-weight:600;
  color:var(--cream);
  line-height:1.3;
  margin-bottom:8px;
}
.popup-sub{
  font-size:13px;
  font-weight:200;
  color:rgba(255,179,193,0.6);
  letter-spacing:2px;
  margin-bottom:28px;
}
.popup-btns{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}

.yes-btn{
  padding:14px 38px;
  background:linear-gradient(135deg,var(--rose),#c2185b);
  border:none;border-radius:50px;
  color:#fff;font-size:18px;
  font-family:'Cormorant Garamond',serif;
  font-style:italic;
  letter-spacing:1px;
  cursor:none;
  box-shadow:0 0 25px rgba(232,38,74,0.5);
  transition:transform .3s cubic-bezier(.34,1.56,.64,1),box-shadow .3s;
}
.yes-btn:hover{transform:scale(1.1);box-shadow:0 0 45px rgba(232,38,74,0.8)}

.no-btn{
  padding:14px 38px;
  background:transparent;
  border:1px solid rgba(255,255,255,0.18);
  border-radius:50px;
  color:rgba(255,179,193,0.7);
  font-size:18px;
  font-family:'Cormorant Garamond',serif;
  font-style:italic;
  cursor:none;
  transition:transform .2s,opacity .2s,left .2s,top .2s;
  position:relative;
}
.no-btn:hover{opacity:0.5}

/* â”€â”€â”€ RESULT SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#result{
  display:none;
  position:fixed;inset:0;
  background:radial-gradient(ellipse at center,#1a0022 0%,#06000e 70%);
  z-index:200;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:20px;
  text-align:center;
}
#result.show{display:flex}

/* Big Heart SVG animation */
#heartWrap{
  position:relative;
  margin-bottom:10px;
}
.heart-svg{
  width:clamp(120px,30vw,200px);
  height:auto;
  animation:heartPop .6s cubic-bezier(.34,1.56,.64,1) forwards, beatHeart 1.1s .6s ease-in-out infinite;
  filter:drop-shadow(0 0 40px rgba(232,38,74,0.8)) drop-shadow(0 0 80px rgba(232,38,74,0.4));
  transform-origin:center;
}
.yes-giant{
  font-family:'Dancing Script',cursive;
  font-size:clamp(70px,18vw,130px);
  background:linear-gradient(135deg,var(--rose),var(--gold));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;
  line-height:1;
  filter:drop-shadow(0 0 30px rgba(232,38,74,0.5));
  opacity:0;
  animation:yesSlam .8s .3s cubic-bezier(.34,1.56,.64,1) forwards;
}

/* Message */
#loveMsg{
  max-width:520px;
  width:100%;
  opacity:0;
  transform:translateY(30px);
  transition:opacity 1s,transform 1s;
  margin-top:18px;
}
#loveMsg.show{opacity:1;transform:none}

.msg-from{
  font-family:'Montserrat',sans-serif;
  font-weight:200;
  font-size:10px;
  letter-spacing:6px;
  text-transform:uppercase;
  color:var(--gold);
  margin-bottom:16px;
}
.msg-body{
  font-family:'Cormorant Garamond',serif;
  font-style:italic;
  font-size:clamp(16px,3.5vw,22px);
  line-height:1.9;
  color:var(--cream);
}
.msg-body em{color:var(--gold);font-style:normal}
.msg-sign{
  font-family:'Dancing Script',cursive;
  font-size:clamp(22px,5vw,34px);
  color:var(--rose);
  margin-top:16px;
  display:block;
  filter:drop-shadow(0 0 12px rgba(232,38,74,0.4));
}

/* â”€â”€â”€ MUSIC BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#musicBar{
  position:fixed;
  bottom:20px;left:50%;
  transform:translateX(-50%);
  background:rgba(18,0,26,0.9);
  backdrop-filter:blur(20px);
  border:1px solid rgba(232,38,74,0.25);
  border-radius:50px;
  padding:10px 22px;
  display:flex;
  align-items:center;
  gap:12px;
  z-index:300;
  opacity:0;
  transition:opacity .8s;
  box-shadow:0 8px 40px rgba(232,38,74,0.15);
}
#musicBar.show{opacity:1}
.mb-note{font-size:18px;animation:spin 3s linear infinite}
.mb-text{font-size:12px;font-weight:200;letter-spacing:2px;color:var(--blush)}
.eq{display:flex;align-items:flex-end;gap:3px;height:18px}
.eq-bar{
  width:4px;border-radius:3px;
  background:linear-gradient(to top,var(--rose),var(--gold));
  animation:eq .5s infinite alternate;
}
.eq-bar:nth-child(1){height:6px;animation-delay:0s}
.eq-bar:nth-child(2){height:14px;animation-delay:.1s}
.eq-bar:nth-child(3){height:9px;animation-delay:.2s}
.eq-bar:nth-child(4){height:17px;animation-delay:.05s}
.eq-bar:nth-child(5){height:11px;animation-delay:.15s}

/* â”€â”€â”€ PARTICLE CANVAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#confettiCanvas{
  position:fixed;inset:0;
  pointer-events:none;
  z-index:250;
}

/* â”€â”€â”€ ANIMATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes popIn{
  from{transform:scale(0.6);opacity:0}
  to{transform:scale(1);opacity:1}
}
@keyframes floatBear{
  0%,100%{transform:translateY(0) rotate(-3deg)}
  50%{transform:translateY(-18px) rotate(3deg)}
}
@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.3)}
}
@keyframes sway{
  0%,100%{transform:rotate(-8deg)}
  50%{transform:rotate(8deg)}
}
@keyframes heartPop{
  from{transform:scale(0);opacity:0}
  to{transform:scale(1);opacity:1}
}
@keyframes beatHeart{
  0%,100%{transform:scale(1)}
  15%{transform:scale(1.18)}
  30%{transform:scale(1)}
  45%{transform:scale(1.12)}
  60%{transform:scale(1)}
}
@keyframes yesSlam{
  from{transform:scale(2.5);opacity:0}
  to{transform:scale(1);opacity:1}
}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes eq{from{transform:scaleY(.2)}to{transform:scaleY(1)}}
@keyframes particleUp{
  0%{transform:translate(0,0) scale(1);opacity:1}
  100%{transform:translate(var(--px),var(--py)) scale(0);opacity:0}
}
@keyframes shimmer{
  0%,100%{background-position:0% 50%}
  50%{background-position:100% 50%}
}

/* â”€â”€â”€ DECORATIVE STARS ON RESULT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.star-field{
  position:fixed;inset:0;pointer-events:none;z-index:201;overflow:hidden;
}
.star{
  position:absolute;
  width:2px;height:2px;
  background:#fff;
  border-radius:50%;
  animation:twinkle var(--d) var(--delay) infinite;
}
@keyframes twinkle{
  0%,100%{opacity:.2;transform:scale(1)}
  50%{opacity:1;transform:scale(1.8)}
}
</style>
</head>
<body>

<div id="cur"></div>
<canvas id="confettiCanvas"></canvas>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 1 â€” VIDEO + TEDDIES + BUTTON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page1">

  <!-- Animated "Video" Canvas -->
  <div class="canvas-wrap">
    <canvas id="videoCanvas"></canvas>
    <div class="canvas-overlay">
      <p class="canvas-date">14 February Â· A Love Story</p>
      <h1 class="canvas-heading">Ankit â¤ï¸ Ruchi</h1>
      <p class="canvas-sub">Happy Valentine's Day</p>
    </div>
  </div>

  <!-- Teddies -->
  <div id="teddies">
    <div class="bears-row">
      <div class="bear">
        <span class="bear-icon">ğŸ§¸</span>
        <span class="bear-name">Ankit</span>
      </div>
      <div class="connector">ğŸ’—</div>
      <div class="bear">
        <span class="bear-icon">ğŸ§¸</span>
        <span class="bear-name">Ruchi</span>
      </div>
    </div>

    <button class="cta-btn" onclick="openPopup()">
      Open Your Heart &nbsp;ğŸ’Œ
    </button>
  </div>

</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     POPUP â€” Will you be my Valentine?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="popup">
  <div class="popup-box">
    <span class="popup-rose">ğŸŒ¹</span>
    <p class="popup-title">Will you be my Valentine?</p>
    <p class="popup-sub">choose wisely ğŸ’•</p>
    <div class="popup-btns">
      <button class="yes-btn" onclick="handleYes()">Yes, always! ğŸ˜</button>
      <button class="no-btn" id="noBtn"
        onmouseover="escapeButton(this)"
        ontouchstart="escapeButton(this)">
        No ğŸ™ˆ
      </button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     RESULT SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="result">
  <div class="star-field" id="starField"></div>

  <div id="heartWrap">
    <!-- SVG Heart -->
    <svg class="heart-svg" viewBox="0 0 100 90" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="hg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#ff2d6b"/>
          <stop offset="100%" stop-color="#c2185b"/>
        </linearGradient>
      </defs>
      <path d="M50 85 C50 85 5 55 5 28 C5 13 17 3 30 3 C38 3 46 8 50 15 C54 8 62 3 70 3 C83 3 95 13 95 28 C95 55 50 85 50 85Z"
            fill="url(#hg)" stroke="rgba(255,180,180,0.4)" stroke-width="0.5"/>
      <!-- Shine -->
      <ellipse cx="35" cy="22" rx="8" ry="5" fill="rgba(255,255,255,0.25)" transform="rotate(-30 35 22)"/>
    </svg>
  </div>

  <p class="yes-giant">Yes! ğŸ’–</p>

  <!-- Romantic message -->
  <div id="loveMsg">
    <p class="msg-from">A message from the heart</p>
    <p class="msg-body">
      My dearest <em>Ruchi</em> ğŸŒ¹<br><br>
      From the moment you walked into my life,<br>
      the world became softer, warmer, <em>more beautiful</em>.<br><br>
      You are my favourite reason to smile,<br>
      my calm in every storm,<br>
      my home in every moment.<br><br>
      <em>Thank you for being mine.</em><br>
      Today, and every day after. ğŸ’
    </p>
    <span class="msg-sign">â€” Ankit â¤ï¸</span>
  </div>
</div>

<!-- Music bar -->
<div id="musicBar">
  <span class="mb-note">ğŸµ</span>
  <span class="mb-text">Playing our song</span>
  <div class="eq">
    <div class="eq-bar"></div>
    <div class="eq-bar"></div>
    <div class="eq-bar"></div>
    <div class="eq-bar"></div>
    <div class="eq-bar"></div>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CUSTOM CURSOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const cur = document.getElementById('cur');
document.addEventListener('mousemove', e => {
  cur.style.left = e.clientX + 'px';
  cur.style.top  = e.clientY + 'px';
});
document.querySelectorAll('button,.cta-btn').forEach(el => {
  el.addEventListener('mouseenter', () => cur.classList.add('big'));
  el.addEventListener('mouseleave', () => cur.classList.remove('big'));
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATED VIDEO CANVAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function() {
  const canvas = document.getElementById('videoCanvas');
  const ctx    = canvas.getContext('2d');
  let W, H;

  function resize() {
    W = canvas.width  = canvas.offsetWidth;
    H = canvas.height = Math.min(canvas.offsetWidth * 0.45, 340);
    canvas.style.height = H + 'px';
  }
  resize();
  window.addEventListener('resize', resize);

  /* Petals */
  const petals = [];
  const petalColors = ['#ff6b8a','#ffb3c1','#e8264a','#ffd0dc','#f0c060'];

  for(let i = 0; i < 55; i++) {
    petals.push({
      x: Math.random() * 1200,
      y: Math.random() * 500 - 100,
      size: 4 + Math.random() * 10,
      speedY: 0.5 + Math.random() * 1.5,
      speedX: (Math.random() - 0.5) * 0.8,
      rot: Math.random() * Math.PI * 2,
      rotSpeed: (Math.random() - 0.5) * 0.06,
      color: petalColors[Math.floor(Math.random() * petalColors.length)],
      opacity: 0.4 + Math.random() * 0.6
    });
  }

  /* Glowing orbs */
  const orbs = Array.from({length: 6}, (_, i) => ({
    x: 0.15 + i * 0.14,
    y: 0.2 + Math.random() * 0.6,
    r: 40 + Math.random() * 80,
    phase: Math.random() * Math.PI * 2,
    color: i % 2 === 0 ? 'rgba(232,38,74,' : 'rgba(240,192,96,'
  }));

  /* Sparkles */
  const sparks = Array.from({length: 30}, () => ({
    x: Math.random(),
    y: Math.random(),
    size: 1 + Math.random() * 2,
    phase: Math.random() * Math.PI * 2,
    speed: 0.03 + Math.random() * 0.05
  }));

  let t = 0;
  function draw() {
    t += 0.016;

    /* Background gradient */
    const bg = ctx.createLinearGradient(0, 0, 0, H);
    bg.addColorStop(0, '#1a0028');
    bg.addColorStop(0.5, '#0d0018');
    bg.addColorStop(1, '#06000e');
    ctx.fillStyle = bg;
    ctx.fillRect(0, 0, W, H);

    /* Orbs */
    orbs.forEach(o => {
      const pulse = Math.sin(t * 0.6 + o.phase) * 0.3 + 0.7;
      const grd = ctx.createRadialGradient(o.x*W, o.y*H, 0, o.x*W, o.y*H, o.r * pulse);
      grd.addColorStop(0, o.color + '0.12)');
      grd.addColorStop(1, 'transparent');
      ctx.fillStyle = grd;
      ctx.fillRect(0, 0, W, H);
    });

    /* Petals */
    petals.forEach(p => {
      ctx.save();
      ctx.globalAlpha = p.opacity;
      ctx.translate(p.x / 1200 * W, p.y / 500 * H);
      ctx.rotate(p.rot);
      ctx.fillStyle = p.color;
      ctx.beginPath();
      ctx.ellipse(0, 0, p.size * (W/1200), p.size * 0.6 * (H/500), 0, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();

      p.y  += p.speedY;
      p.x  += p.speedX + Math.sin(t * 0.4 + p.rot) * 0.3;
      p.rot += p.rotSpeed;
      if(p.y / 500 * H > H + 20) {
        p.y = -30;
        p.x = Math.random() * 1200;
      }
    });

    /* Sparkles */
    sparks.forEach(s => {
      s.phase += s.speed;
      const glow = (Math.sin(s.phase) + 1) / 2;
      ctx.save();
      ctx.globalAlpha = glow * 0.9;
      ctx.fillStyle = '#fff';
      ctx.shadowBlur = 6;
      ctx.shadowColor = '#ffd0dc';
      ctx.beginPath();
      ctx.arc(s.x * W, s.y * H, s.size * glow, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    });

    /* Bottom fade */
    const fade = ctx.createLinearGradient(0, H * 0.6, 0, H);
    fade.addColorStop(0, 'transparent');
    fade.addColorStop(1, '#06000e');
    ctx.fillStyle = fade;
    ctx.fillRect(0, 0, W, H);

    requestAnimationFrame(draw);
  }
  draw();
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   POPUP LOGIC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function openPopup() {
  document.getElementById('popup').classList.add('show');
  resetNoBtn();
}

let noEscaped = 0;
function escapeButton(btn) {
  noEscaped++;
  if(noEscaped > 4) {
    // After 5 escapes just trigger yes
    handleYes();
    return;
  }
  const popup = document.querySelector('.popup-box');
  const maxX  = popup.offsetWidth  - btn.offsetWidth  - 20;
  const maxY  = popup.offsetHeight - btn.offsetHeight - 20;
  btn.style.position = 'absolute';
  btn.style.left = (Math.random() * maxX + 10) + 'px';
  btn.style.top  = (Math.random() * maxY + 10) + 'px';
  btn.style.transition = 'left .25s, top .25s';
  popup.style.position = 'relative';
  popup.style.overflow = 'visible';

  // Playful labels
  const labels = ['Nope ğŸ˜¤','Try again ğŸ™ˆ','Still No! ğŸ˜‚','Runninggg ğŸƒ','...ok FINE! ğŸ˜'];
  btn.textContent = labels[Math.min(noEscaped - 1, 4)];
}

function resetNoBtn() {
  const btn = document.getElementById('noBtn');
  btn.style.position = '';
  btn.style.left = '';
  btn.style.top = '';
  btn.textContent = 'No ğŸ™ˆ';
  noEscaped = 0;
}

function handleYes() {
  document.getElementById('popup').classList.remove('show');
  showResult();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESULT / CELEBRATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showResult() {
  const result = document.getElementById('result');
  result.classList.add('show');

  // Stars background
  buildStars();

  // Show message after delay
  setTimeout(() => {
    document.getElementById('loveMsg').classList.add('show');
  }, 1400);

  // Confetti burst
  setTimeout(launchConfetti, 400);
  setTimeout(launchConfetti, 900);
  setTimeout(launchConfetti, 1600);

  // Music
  startMusic();

  // Music bar
  setTimeout(() => {
    document.getElementById('musicBar').classList.add('show');
  }, 800);
}

function buildStars() {
  const sf = document.getElementById('starField');
  sf.innerHTML = '';
  for(let i = 0; i < 60; i++) {
    const s = document.createElement('div');
    s.className = 'star';
    s.style.left   = Math.random() * 100 + '%';
    s.style.top    = Math.random() * 100 + '%';
    s.style.setProperty('--d',     (2 + Math.random() * 4) + 's');
    s.style.setProperty('--delay', (Math.random() * 4) + 's');
    sf.appendChild(s);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI / FIREWORKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function() {
  const canvas = document.getElementById('confettiCanvas');
  const ctx    = canvas.getContext('2d');
  let particles = [];

  window.addEventListener('resize', () => {
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;
  });
  canvas.width  = window.innerWidth;
  canvas.height = window.innerHeight;

  function Particle(x, y) {
    const angle   = Math.random() * Math.PI * 2;
    const speed   = 3 + Math.random() * 8;
    const colors  = ['#ff2d6b','#ffd700','#ffb3c1','#ffffff','#ff8fab','#c2185b','#f0c060'];
    this.x     = x;
    this.y     = y;
    this.vx    = Math.cos(angle) * speed;
    this.vy    = Math.sin(angle) * speed - 4;
    this.alpha = 1;
    this.decay = 0.012 + Math.random() * 0.012;
    this.r     = 4 + Math.random() * 6;
    this.color = colors[Math.floor(Math.random() * colors.length)];
    this.gravity = 0.18;
    this.shape = Math.random() > 0.5 ? 'circle' : 'heart';
  }

  Particle.prototype.update = function() {
    this.vy    += this.gravity;
    this.x     += this.vx;
    this.y     += this.vy;
    this.alpha -= this.decay;
    this.vx    *= 0.99;
  };

  Particle.prototype.draw = function() {
    ctx.save();
    ctx.globalAlpha = Math.max(this.alpha, 0);
    ctx.fillStyle   = this.color;
    if(this.shape === 'circle') {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
      ctx.fill();
    } else {
      // Mini heart
      const s = this.r * 0.7;
      ctx.translate(this.x, this.y);
      ctx.beginPath();
      ctx.moveTo(0, s * 0.3);
      ctx.bezierCurveTo(-s, -s * 0.2, -s * 1.8, s * 0.8, 0, s * 1.8);
      ctx.bezierCurveTo(s * 1.8, s * 0.8, s, -s * 0.2, 0, s * 0.3);
      ctx.fill();
    }
    ctx.restore();
  };

  window.launchConfetti = function() {
    const cx = window.innerWidth / 2;
    const cy = window.innerHeight * 0.35;
    for(let i = 0; i < 80; i++) {
      particles.push(new Particle(
        cx + (Math.random() - 0.5) * 80,
        cy + (Math.random() - 0.5) * 40
      ));
    }
  };

  (function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles = particles.filter(p => p.alpha > 0);
    particles.forEach(p => { p.update(); p.draw(); });
    requestAnimationFrame(animate);
  })();
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WEB AUDIO MUSIC
   (Gentle romantic melody â€” no file needed)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function startMusic() {
  try {
    const AC = window.AudioContext || window.webkitAudioContext;
    if(!AC) return;
    const ac   = new AC();
    const master = ac.createGain();
    master.gain.value = 0.18;
    master.connect(ac.destination);

    // Reverb convolver (simple impulse)
    function makeReverb(duration) {
      const len  = ac.sampleRate * duration;
      const buf  = ac.createBuffer(2, len, ac.sampleRate);
      for(let c = 0; c < 2; c++) {
        const data = buf.getChannelData(c);
        for(let i = 0; i < len; i++)
          data[i] = (Math.random()*2-1) * Math.pow(1-i/len, 2);
      }
      const conv = ac.createConvolver();
      conv.buffer = buf;
      return conv;
    }
    const reverb = makeReverb(2.5);
    reverb.connect(master);
    const dry = ac.createGain(); dry.gain.value = 0.6; dry.connect(master);
    const wet = ac.createGain(); wet.gain.value = 0.4; wet.connect(reverb);

    function playNote(freq, start, dur, vol=0.5) {
      const osc  = ac.createOscillator();
      const gain = ac.createGain();
      osc.type = 'sine';
      osc.frequency.value = freq;
      osc.connect(gain);
      gain.connect(dry);
      gain.connect(wet);
      gain.gain.setValueAtTime(0, start);
      gain.gain.linearRampToValueAtTime(vol, start + 0.05);
      gain.gain.exponentialRampToValueAtTime(0.001, start + dur);
      osc.start(start);
      osc.stop(start + dur + 0.1);
    }

    // Romantic melody in E minor (frequencies)
    // A soft, slow arpeggiated progression
    const notes = [
      // E minor: E4 G4 B4 â€” A minor: A4 C5 E5 â€” C major: C4 E4 G4 â€” B: B3 D4 F#4
      [329.63, 392.00, 493.88],   // Em
      [440.00, 523.25, 659.25],   // Am
      [261.63, 329.63, 392.00],   // C
      [246.94, 293.66, 369.99],   // B
      [329.63, 392.00, 493.88],   // Em
      [349.23, 440.00, 523.25],   // Am7ish
      [261.63, 329.63, 392.00],   // C
      [293.66, 369.99, 440.00],   // G
    ];

    const beatLen = 1.8; // seconds per chord
    let loopStart = ac.currentTime + 0.3;

    function scheduleLoop(startTime) {
      notes.forEach((chord, i) => {
        const t = startTime + i * beatLen;
        chord.forEach((freq, j) => {
          playNote(freq, t + j * 0.28, beatLen * 1.2, 0.3);
        });
        // Add a gentle melody note on top
        const melody = [659.25, 698.46, 740.00, 659.25, 587.33, 622.25, 587.33, 554.37];
        playNote(melody[i], t + 0.1, beatLen * 0.9, 0.55);
      });
    }

    scheduleLoop(loopStart);
    // Re-schedule loop seamlessly
    const totalDur = notes.length * beatLen;
    function loop(nextStart) {
      scheduleLoop(nextStart);
      setTimeout(() => loop(nextStart + totalDur), (totalDur - 0.5) * 1000);
    }
    setTimeout(() => loop(loopStart + totalDur), (totalDur - 0.5) * 1000);

  } catch(e) {
    console.log('Audio not available:', e);
  }
}
</script>
</body>
</html>
